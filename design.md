##go-linq的并发模型
1. linq的处理被分为不同的步骤，步骤类型包括：

   * select （映射）

   * where （过滤）

   * from （设置数据源）

   * join （连接）

   * Group or distinct（分组）

   * 聚合 （折叠)

   * Set (集合的交集、差集、并集、串联）

   * 排序

   * 获取子分区


2. 每个步骤内部采取数据并行的方式进行处理

4. 每个步骤内的数据并行不采用每个数据一个GO router的简单模式（如果数据太多是不可行的），有2种不同的模式:

   * 如果数据是长度已知的列表，则采用数据分割，即分割成数量为（计算机内核数）的块，每块一个GO router

   * 如果数据长度未知（比如CHAN），则采用数据分块，即将接受的数据汇集为指定块的大小后，发给GO router处理，每个步骤的go router的数量=（计算机内核数）

3. 步骤之间尽可能不采用串联模式，而是尽量使用管道模式

   * select可以采取管道模式或分区模式（根据数据源的模式）
   * where：结果的数量无法预知，因此要将结果数据分块后以管道模式发送给下个步骤
   * from：分块可以管道，分区无需管道
   * join： 结果的数量无法预知，因此要将结果数据分块后以管道模式发送给下个步骤
   * group or distinct: 结果必须在整个步骤完成后才能得到，因此可以采取分区模式发送给下个步骤
   * 聚合： 返回单个值，没有后续处理
   * Set： 除了串联其他都要在整个步骤完成后以分区模式发送，串联可以分块发送
   * 获取子分区： 数量已知的分区，其他情况分块
   * 排序，与group类似，结果也必须在整个步骤完成后得到

4. 输出结果支持一次输出所有和提供CHAN两种模式。 如果单个元素处理结果

4. 如果数据数较少最好不进行并行处理，否则分割数据和汇总的开销会超过它们带来的好处
